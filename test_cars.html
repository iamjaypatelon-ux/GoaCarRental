<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Available Cars</title>

<style>
body{font-family:sans-serif;background:#f5f7f6;margin:0;padding:15px;}
.grid{
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(260px,1fr));
  gap:15px;
}
.card{
  background:#fff;
  padding:15px;
  border-radius:12px;
  box-shadow:0 5px 15px rgba(0,0,0,0.05);
}
.card img{
  width:100%;
  height:150px;
  object-fit:cover;
  border-radius:8px;
}
.btn{
  background:#25D366;
  color:#fff;
  padding:10px;
  border:none;
  border-radius:6px;
  width:100%;
  margin-top:10px;
}
.highlight{
  background:#e6f7f1;
  padding:6px;
  border-radius:6px;
  margin:6px 0;
  font-weight:600;
}
</style>
</head>

<body>

<h2>Available Cars</h2>
<div class="grid" id="carGrid"></div>

<script>

// 30+ cars here
const cars = [
  {name:"Hycross Automatic", rate:3000, image:"Toyota Innova Hycross.png"},
  {name:"Thar Manual", rate:2500, image:"Thar 4x4 (Manual).png"},
  {name:"Swift Manual", rate:1800, image:"swift.png"},
  {name:"Baleno", rate:1900, image:"baleno.png"}
  // add all 30+ here
];

// Get URL data
const params = new URLSearchParams(window.location.search);

const pickup = new Date(params.get("pickup"));
const drop = new Date(params.get("drop"));
const pickupLoc = params.get("pickupLoc");
const dropLoc = params.get("dropLoc");

// ---- 9AM Billing Logic ----
function billingPickup(d){
  let x = new Date(d);
  if(x.getHours()<4) x.setDate(x.getDate()-1);
  x.setHours(9,0,0,0);
  return x;
}

function billingDrop(d){
  let x = new Date(d);
  if(x.getHours()>9 || (x.getHours()==9 && x.getMinutes()>30))
    x.setDate(x.getDate()+1);
  x.setHours(9,0,0,0);
  return x;
}

let days = Math.ceil(
  (billingDrop(drop)-billingPickup(pickup))/(1000*60*60*24)
);
if(days<1) days=1;

// Delivery charge logic simplified
let deliveryCharge = 500;
let fixed = 2000;
let deposit = 5000;
let advance = 2000;

let grid = document.getElementById("carGrid");

cars.forEach(car=>{

  let rent = (car.rate*days)+deliveryCharge+fixed;
  let payable = rent+deposit;
  let balance = payable-advance;

  let card = `
  <div class="card">
    <img src="${car.image}">
    <h3>${car.name}</h3>
    <p>Days: ${days}</p>
    <p>Total Rent: ₹${rent}</p>
    <div class="highlight">Total: ₹${payable}</div>
    <p>Balance at Delivery: ₹${balance}</p>
    <button class="btn"
      onclick="book('${car.name}',${rent},${payable},${balance})">
      Book Now
    </button>
  </div>
  `;

  grid.innerHTML += card;

});

function book(name,rent,payable,balance){

let message =
`Delivery - ${pickup.toLocaleString()} at ${pickupLoc}
Return - ${drop.toLocaleString()} at ${dropLoc}
Car Model - ${name}
________
Total rent - ₹${rent}
Refundable deposit - ₹5000
________
Total - ₹${payable}
Pre Booking - ₹2000
To Pay During Car Delivery - ₹${balance}
________
I want to book ${name}.
Please share your QR for advance payment.`;

let url="https://wa.me/917984509196?text="+encodeURIComponent(message);
window.open(url,"_blank");
}

</script>

</body>
</html>
