<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Available Cars</title>

<style>
body{font-family:sans-serif;background:#f5f7f6;margin:0;padding:15px;}
.grid{
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(260px,1fr));
  gap:15px;
}
.card{
  background:#fff;
  padding:15px;
  border-radius:12px;
  box-shadow:0 5px 15px rgba(0,0,0,0.05);
}
.card img{
  width:100%;
  aspect-ratio:1/1;
  object-fit:cover;
  border-radius:10px;
}
.btn{
  background:#25D366;
  color:#fff;
  padding:10px;
  border:none;
  border-radius:6px;
  width:100%;
  margin-top:10px;
}
.highlight{
  background:#e6f7f1;
  padding:6px;
  border-radius:6px;
  margin:6px 0;
  font-weight:600;
}
.section-header{
  background:#ffffff;
  padding:14px;
  border-radius:10px;
  margin-top:20px;
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 4px 12px rgba(0,0,0,0.05);
  font-weight:600;
  color:#075E54;
}

.section-header span{
  font-size:18px;
  transition:0.3s;
}

.section-grid{
  margin-top:15px;
  display:none;
}

.section-grid.active{
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(260px,1fr));
  gap:15px;
}</style>
</head>

<body>

<h2>Available Cars</h2>
<div id="carGrid"></div>

<script>

// Correct cars array
const cars = [

  // Compact
  {name:"Swift Manual", rate:1000, deposit:3000, advance:1000, image:"Swift (Manual).png", category:"compact"},
  {name:"Baleno", rate:1000, deposit:3000, advance:1000, image:"Baleno (Manual).png", category:"compact"},

  // Premium
  {name:"Hycross Automatic", rate:3000, deposit:5000, advance:2000, image:"Toyota Innova Hycross.png", category:"premium"},

  // Adventure
  {name:"Thar Manual", rate:2500, deposit:5000, advance:2000, image:"Thar 4x4 (Manual).png", category:"adventure"},

  // Family
  {name:"Innova Crysta", rate:2800, deposit:6000, advance:2000, image:"crysta.png", category:"family"},

  // Luxury
  {name:"Fortuner", rate:4500, deposit:15000, advance:5000, image:"fortuner.png", category:"luxury"}

];

const categories = {
  compact: "Compact & Mid-Size Cars (5-Seaters)",
  premium: "Premium (5-Seaters)",
  adventure: "Adventure Rides – Thar Collection",
  family: "Family & Group Rides (7-Seaters & SUVs)",
  luxury: "Exclusive Luxury Cars"
};

// URL params
const params = new URLSearchParams(window.location.search);

if(!params.get("pickup")){
  document.getElementById("carGrid").innerHTML = "<h3>Please go back and select dates.</h3>";
  throw new Error("Missing booking details");
}

const pickup = new Date(params.get("pickup"));
const drop = new Date(params.get("drop"));
const pickupLoc = params.get("pickupLoc");
const dropLoc = params.get("dropLoc");

// Billing logic
function billingPickup(d){
  let x = new Date(d);
  if(x.getHours()<4) x.setDate(x.getDate()-1);
  x.setHours(9,0,0,0);
  return x;
}

function billingDrop(d){
  let x = new Date(d);
  if(x.getHours()>9 || (x.getHours()==9 && x.getMinutes()>30))
    x.setDate(x.getDate()+1);
  x.setHours(9,0,0,0);
  return x;
}

let days = Math.ceil(
  (billingDrop(drop)-billingPickup(pickup))/(1000*60*60*24)
);
if(days<1) days=1;

let deliveryCharge = 500;
let fixed = 2000;

let grid = document.getElementById("carGrid");

Object.keysfunction book(name,rent,deposit,payable,advance,balance){

let message =
`Delivery - ${pickup.toLocaleString()} at ${pickupLoc}
Return - ${drop.toLocaleString()} at ${dropLoc}
Car Model - ${name}
________
Total rent - ₹${rent}
Refundable deposit - ₹${deposit}
________
Total - ₹${payable}
Pre Booking - ₹${advance}
To Pay During Car Delivery - ₹${balance}
________
I want to book ${name}.
Please share your QR for advance payment.`;

let url="https://wa.me/917984509196?text="+encodeURIComponent(message);
window.open(url,"_blank");
}
</script>

</body>
</html>
