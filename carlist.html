<div class="booking-box">

  <h2>(1) Hycross Automatic</h2>

  <label>Delivery Date & Time</label>
  <input type="datetime-local" id="pickup">

  <label>Return Date & Time</label>
  <input type="datetime-local" id="drop">

  <label>Delivery Location</label>
  <input type="text" id="pickupLocation">

  <label>Return Location</label>
  <input type="text" id="dropLocation">

  <button onclick="bookNow()">Book Now</button>

</div>
<script>
function bookNow() {

  let pickupInput = document.getElementById("pickup").value;
  let dropInput = document.getElementById("drop").value;
  let pickupLocation = document.getElementById("pickupLocation").value;
  let dropLocation = document.getElementById("dropLocation").value;

  if (!pickupInput || !dropInput) {
    alert("Please select dates");
    return;
  }

  let pickup = new Date(pickupInput);
  let drop = new Date(dropInput);

  if (drop <= pickup) {
    alert("Return must be after delivery");
    return;
  }

  // ---- DAY CALCULATION (9AM to 9AM rule) ----
  let diffTime = drop - pickup;
  let days = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

  // ---- RENT ----
  let rent = 3000 * days;

  // ---- DELIVERY CHARGE CHECK ----
  function isNight(hour) {
    return (hour < 9 || hour >= 21);
  }

  let pickupHour = pickup.getHours();
  let dropHour = drop.getHours();

  let deliveryCharge = 500;

  if (isNight(pickupHour) || isNight(dropHour)) {
    deliveryCharge = 800;
  }

  // ---- FIXED CHARGE ----
  let fixedCharge = 2000;

  let totalRent = rent + deliveryCharge + fixedCharge;

  // ---- DEPOSIT ----
  let deposit = 5000;

  // ---- FINAL ----
  let payable = totalRent + deposit;
  let advance = 2000;
  let balance = payable - advance;

  // ---- FORMAT DATE ----
  let options = { day: 'numeric', month: 'long', year: 'numeric', hour: 'numeric', minute: 'numeric' };

  let pickupFormatted = pickup.toLocaleString('en-IN', options);
  let dropFormatted = drop.toLocaleString('en-IN', options);

  // ---- WHATSAPP MESSAGE ----
  let message =
`Delivery - ${pickupFormatted} at ${pickupLocation}
Return - ${dropFormatted} at ${dropLocation}
Car Model - (1) Hycross Automatic
________
Total rent - ₹${totalRent}
Refundable deposit - ₹${deposit}
________
Total - ₹${payable}
Pre Booking - ₹${advance}
To Pay During Car Delivery - ₹${balance}
________
I want to book (1) Hycross Automatic.
Please share your QR for advance payment.`;

  let whatsappURL = "https://wa.me/917984509196?text=" + encodeURIComponent(message);

  window.open(whatsappURL, "_blank");
}
</script>
